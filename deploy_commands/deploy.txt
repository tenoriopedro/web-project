

######## NO SERVIDOR #########

## ir para o diretorio do projeto
cd siteapp


## ativar ambiente virtual
source venv/bin/activate


## puxar repositorio
git pull siterepo main


## verificar dependencias
cd djangoweb
pip install -r requirements.txt


## fazer migrações
python manage.py migrate


## coletar statics
python manage.py collectstatic --noinput

## reiniciar socket e nginx
sudo systemctl restart site_test
sudo systemctl restart nginx


######### NO AMBIENTE DEV ##########
## trazer medias do ambiente de desenvolvimento
scp -r "C:\DevPro\Gazil\Web\data\web\media" siterepo:/home/ubuntu/


######## NO SERVIDOR #########
mv ~/media /home/ubuntu/siteapp/data/web/



##### Buscar dados do banco de dados
######### NO AMBIENTE DEV ##########

## Criar backup
docker exec -t psql pg_dump -U web_user_admin web_database > ./backup/backup_dev.sql

## Copiar para o servidor
scp backup/backup_dev.sql siterepo:/home/ubuntu/